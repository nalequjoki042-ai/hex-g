
–≠—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥! –ù–µ–π—Ä–æ—Å–µ—Ç–∏ –æ–±–æ–∂–∞—é—Ç, –∫–æ–≥–¥–∞ –∏–º –¥–∞—é—Ç –≥–æ—Ç–æ–≤—ã–π, —Ä–∞–±–æ—Ç–∞—é—â–∏–π "–ø–µ—Å–æ—á–Ω—ã–π" –∫–æ–¥ (Sandbox) –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞. –û–Ω–∏ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ —Å—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –º–∞—Å—Å–∏–≤–æ–≤ (—á–∞—Å—Ç–∏—Ü—ã, –ø—É–ª–∏) –∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç —ç—Ç–æ –≤ —Ç–≤–æ–π –ø—Ä–æ–µ–∫—Ç.

–Ø –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –¥–ª—è —Ç–µ–±—è –°—Ç–µ–Ω–¥ 4-–≤-1. –û–Ω –Ω–∞–ø–∏—Å–∞–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —á–∏—Å—Ç–æ, –º–æ–¥—É–ª—å–Ω–æ –∏ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω –ø–æ–¥ –†–∂–∞–≤—É—é –ü—É—Å—Ç–æ—à—å (Wasteland / Rust): –≥—Ä—è–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞, –æ–≥–æ–Ω—å, –¥—ã–º, –≥–∏–ª—å–∑—ã –∏ –∏—Å–∫—Ä—ã (–Ω–∏–∫–∞–∫–æ–≥–æ —Å–∫—É—á–Ω–æ–≥–æ –±–µ–ª–æ–≥–æ —Ü–≤–µ—Ç–∞).

–í –Ω–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ä–æ–≤–Ω–æ —Ç–µ 4 –º–µ—Ö–∞–Ω–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –ø—Ä–æ—Å–∏–ª:

üéØ –û–¥–∏–Ω–æ—á–Ω—ã–π –≤—ã—Å—Ç—Ä–µ–ª (–í–∏–Ω—Ç–æ–≤–∫–∞): –ë—ã—Å—Ç—Ä—ã–π —Ç—Ä–∞—Å—Å–µ—Ä, —Ç–æ—á–Ω–æ–µ –ø–æ–ø–∞–¥–∞–Ω–∏–µ, –±—Ä—ã–∑–≥–∏ –∫—Ä–æ–≤–∏.

ü™ì –ú–∏–ª–∏-–∞—Ç–∞–∫–∞ (–†—ã–≤–æ–∫): –Æ–Ω–∏—Ç –±—Ä–æ—Å–∞–µ—Ç—Å—è –Ω–∞ –≤—Ä–∞–≥–∞, –±—å–µ—Ç (—ç–∫—Ä–∞–Ω —Ç—Ä—è—Å–µ—Ç—Å—è) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è.

üî´ –û—á–µ—Ä–µ–¥—å (–ü–∏—Å—Ç–æ–ª–µ—Ç-–ø—É–ª–µ–º–µ—Ç / –ê–≤—Ç–æ–º–∞—Ç): –í—ã–ª–µ—Ç–∞–µ—Ç 5 –ø—É–ª—å —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π. –£ –ø—É–ª—å –µ—Å—Ç—å —Ä–∞–∑–±—Ä–æ—Å (spread) ‚Äî –æ–Ω–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Ä–∞–∑–Ω—ã–µ —á–∞—Å—Ç–∏ –≥–µ–∫—Å–∞ –∏ —Ñ–∏—à–∫–∏ –≤—Ä–∞–≥–∞, –≤—ã—Å–µ–∫–∞—è –∏—Å–∫—Ä—ã.

üöÄ –†–∞–∫–µ—Ç–∞ (–†–ü–ì / –ë–∞–∑—É–∫–∞): –õ–µ—Ç–∏—Ç –º–µ–¥–ª–µ–Ω–Ω–æ, –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –≥—É—Å—Ç–æ–π —à–ª–µ–π—Ñ –¥—ã–º–∞. –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ ‚Äî –æ–≥—Ä–æ–º–Ω—ã–π –≤–∑—Ä—ã–≤, –æ–≥–æ–Ω—å –∏ —Å–∏–ª—å–Ω–∞—è —Ç—Ä—è—Å–∫–∞ —ç–∫—Ä–∞–Ω–∞.

üìã –ö–ê–ö –≠–¢–û –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ (–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ç–µ–±—è)
–°–æ—Ö—Ä–∞–Ω–∏ –∫–æ–¥ –Ω–∏–∂–µ –≤ —Ñ–∞–π–ª wasteland-vfx.html –∏ –æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —á—Ç–æ–±—ã —Å–∞–º–æ–º—É –ø–æ–∫–ª–∏–∫–∞—Ç—å –∏ –∫–∞–π—Ñ–∞–Ω—É—Ç—å.

–°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å –∫–æ–¥ –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å —Å–≤–æ–µ–π –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ (Cursor / ChatGPT) —Å —Ç–∞–∫–∏–º –ø—Ä–æ–º–ø—Ç–æ–º:

"–ü—Ä–∏–≤–µ—Ç! –í–æ—Ç HTML-—Ñ–∞–π–ª —Å –∏–¥–µ–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (VFX) –¥–ª—è –Ω–∞—à–µ–π –∏–≥—Ä—ã. –ü–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫ —Ç—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–∞—Å—Å–∏–≤—ã projectiles, particles, floatingTexts –∏ —Ñ—É–Ω–∫—Ü–∏—è requestAnimationFrame(draw). –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π —ç—Ç—É –∂–µ —Å–∏—Å—Ç–µ–º—É –≤ –º–æ–π —Ç–µ–∫—É—â–∏–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥. –°–¥–µ–ª–∞–π —Ç–∞–∫, —á—Ç–æ–±—ã –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è –∞—Ç–∞–∫–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞, –∫–ª–∏–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–ª –Ω—É–∂–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é (melee, sniper, burst –∏–ª–∏ rocket) –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –æ—Ä—É–∂–∏—è."

üíª –ì–û–¢–û–í–´–ô –ö–û–î (–†–µ—Ñ–µ—Ä–µ–Ω—Å –¥–ª—è –ò–ò –∏ –¥–µ–º–æ –¥–ª—è —Ç–µ–±—è):
code
Html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wasteland VFX Reference</title>
    <style>
        /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥ –º—Ä–∞—á–Ω—ã–π —Å–µ—Ç—Ç–∏–Ω–≥ –≤—ã–∂–∏–≤–∞–Ω–∏—è */
        body { margin: 0; overflow: hidden; background-color: #1a1815; font-family: 'Courier New', monospace; color: #d4c4b4; }
        canvas { display: block; }
        #ui { position: absolute; top: 20px; left: 20px; background: rgba(20, 18, 15, 0.85); padding: 15px; border: 2px solid #5a4d40; border-radius: 4px; z-index: 10; border-left: 4px solid #d93829; }
        button { display: block; width: 100%; margin-bottom: 8px; padding: 10px; background: #2c2722; color: #d4c4b4; border: 1px solid #4a4035; cursor: pointer; font-weight: bold; transition: 0.1s; text-align: left; }
        button:hover { background: #3d352e; border-color: #fca311; color: #fff; }
    </style>
</head>
<body>

    <div id="ui">
        <h3 style="margin-top: 0; color: #fca311;">–¢–µ—Å—Ç –û—Ä—É–∂–∏—è (VFX)</h3>
        <button onclick="triggerAttack('sniper')">üéØ 1. –í–∏–Ω—Ç–æ–≤–∫–∞ (–û–¥–∏–Ω –≤—ã—Å—Ç—Ä–µ–ª)</button>
        <button onclick="triggerAttack('melee')">ü™ì 2. –¢–æ–ø–æ—Ä (–ú–∏–ª–∏-—Ä—ã–≤–æ–∫)</button>
        <button onclick="triggerAttack('burst')">üî´ 3. –ê–≤—Ç–æ–º–∞—Ç (–û—á–µ—Ä–µ–¥—å + –†–∞–∑–±—Ä–æ—Å)</button>
        <button onclick="triggerAttack('rocket')">üöÄ 4. –†–ü–ì (–†–∞–∫–µ—Ç–∞ + –î—ã–º)</button>
        <p style="font-size: 11px; color: #888; margin-bottom: 0;">*–ö–ª–∏–∫–∞–π –ø–æ –∫–Ω–æ–ø–∫–∞–º –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞</p>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // === 1. –°–û–°–¢–û–Ø–ù–ò–ï (STATE) ===
    // –í —Ä–µ–∞–ª—å–Ω–æ–π –∏–≥—Ä–µ —ç—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
    const cx = canvas.width / 2;
    const cy = canvas.height / 2;
    
    let attacker = { x: cx - 180, y: cy, base_x: cx - 180, base_y: cy, color: '#4caf50', icon: 'ü§†', hp: 100 };
    let defender = { x: cx + 180, y: cy, color: '#d93829', icon: 'üíÄ', hp: 100, hitTimer: 0 };

    // –ú–∞—Å—Å–∏–≤—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (–Ω–µ –≥—Ä—É–∑—è—Ç —Å–µ—Ä–≤–µ—Ä)
    let projectiles = [];
    let particles = [];
    let floatingTexts = [];
    
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
    let screenShake = 0;
    let meleeAnim = null; // –•—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä—ã–≤–∫–∞

    // === 2. –§–ê–ë–†–ò–ö–ê –≠–§–§–ï–ö–¢–û–í (VFX Spawners) ===
    function spawnBlood(x, y) {
        for(let i=0; i<6; i++) {
            particles.push({
                x: x, y: y,
                vx: (Math.random()-0.5)*10, vy: (Math.random()-1)*8, // –†–∞–∑–ª–µ—Ç
                life: 1.0, color: '#8a0303', type: 'blood', size: Math.random()*3+2
            });
        }
    }

    function spawnSparks(x, y) {
        for(let i=0; i<5; i++) {
            particles.push({
                x: x, y: y,
                vx: (Math.random()-0.5)*15, vy: (Math.random()-0.5)*15,
                life: 1.0, color: '#ffcc00', type: 'spark', size: 2
            });
        }
    }

    function spawnExplosion(x, y) {
        // –û–≥–æ–Ω—å
        for(let i=0; i<20; i++) particles.push({ x: x, y: y, vx: (Math.random()-0.5)*18, vy: (Math.random()-0.5)*18, life: 1.0, color: Math.random() > 0.5 ? '#ff6600' : '#ff3300', type: 'fire', size: Math.random()*15+5 });
        // –ß–µ—Ä–Ω—ã–π –¥—ã–º
        for(let i=0; i<15; i++) particles.push({ x: x, y: y, vx: (Math.random()-0.5)*8, vy: (Math.random()-1)*8, life: 1.5, color: '#2b2b2b', type: 'smoke', size: Math.random()*20+10 });
        screenShake = 20; // –û–≥—Ä–æ–º–Ω–∞—è —Ç—Ä—è—Å–∫–∞
    }

    function addDamageText(x, y, dmg, isCrit) {
        floatingTexts.push({
            text: `-${dmg}`, x: x + (Math.random()*20-10), y: y - 40,
            alpha: 1.0, color: isCrit ? '#ffcc00' : '#ff5555', scale: isCrit ? 1.5 : 1.0
        });
    }

    // === 3. –õ–û–ì–ò–ö–ê –ê–¢–ê–ö (–°–∏–º—É–ª—è—Ü–∏—è —Ç–æ–≥–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞) ===
    function triggerAttack(type) {
        if (type === 'sniper') {
            // –û–¥–∏–Ω–æ—á–Ω—ã–π –±—ã—Å—Ç—Ä—ã–π –≤—ã—Å—Ç—Ä–µ–ª
            projectiles.push({
                x: attacker.x, y: attacker.y,
                targetX: defender.x, targetY: defender.y,
                speed: 35, type: 'bullet', damage: 45
            });
            screenShake = 3;
        } 
        else if (type === 'burst') {
            // –û—á–µ—Ä–µ–¥—å –∏–∑ 5 –ø—É–ª—å —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π (setTimeout) –∏ –†–ê–ó–ë–†–û–°–û–ú
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    // –†–∞–∑–±—Ä–æ—Å (Spread) - –ø—É–ª–∏ –ª–µ—Ç—è—Ç –Ω–µ –≤ —Ü–µ–Ω—Ç—Ä, –∞ –≤ —Ä–∞–¥–∏—É—Å–µ 30px –æ—Ç —Ü–µ–ª–∏
                    let spreadX = defender.x + (Math.random() * 60 - 30);
                    let spreadY = defender.y + (Math.random() * 60 - 30);
                    
                    projectiles.push({
                        x: attacker.x, y: attacker.y - 10,
                        targetX: spreadX, targetY: spreadY,
                        speed: 25, type: 'bullet', damage: 8
                    });
                    screenShake = 2; // –ú–∏–∫—Ä–æ-—Ç—Ä—è—Å–∫–∞ –æ—Ç –∫–∞–∂–¥–æ–≥–æ –≤—ã—Å—Ç—Ä–µ–ª–∞
                    
                    // –í—ã–ª–µ—Ç –≥–∏–ª—å–∑—ã –æ—Ç –∞—Ç–∞–∫—É—é—â–µ–≥–æ
                    particles.push({ x: attacker.x, y: attacker.y, vx: -3 - Math.random()*3, vy: -5, life: 1, color: '#d4af37', type: 'casing', size: 3 });
                }, i * 100); // –ö–∞–∂–¥–∞—è –ø—É–ª—è –≤—ã–ª–µ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ 100–º—Å
            }
        }
        else if (type === 'rocket') {
            // –†–∞–∫–µ—Ç–∞ (–†–ü–ì) - –ª–µ—Ç–∏—Ç –º–µ–¥–ª–µ–Ω–Ω–æ, –æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥—ã–º
            projectiles.push({
                x: attacker.x, y: attacker.y,
                targetX: defender.x, targetY: defender.y,
                speed: 8, type: 'rocket', damage: 90
            });
            screenShake = 5; // –û—Ç–¥–∞—á–∞ –ø—Ä–∏ –≤—ã—Å—Ç—Ä–µ–ª–µ
        }
        else if (type === 'melee') {
            // –ú–∏–ª–∏-—Ä—ã–≤–æ–∫
            meleeAnim = { start: Date.now(), duration: 300 };
        }
    }

    // === 4. –ì–õ–ê–í–ù–´–ô –¶–ò–ö–õ –†–ï–ù–î–ï–†–ê (Canvas Render Loop) ===
    function draw() {
        ctx.save();
        // –ü—Ä–∏–º–µ–Ω—è–µ–º Screen Shake
        if (screenShake > 0.5) {
            ctx.translate((Math.random()-0.5)*screenShake, (Math.random()-0.5)*screenShake);
            screenShake *= 0.85; // –ó–∞—Ç—É—Ö–∞–Ω–∏–µ
        }

        // –û—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞ (–ú—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω)
        ctx.fillStyle = '#1a1815';
        ctx.fillRect(-50, -50, canvas.width+100, canvas.height+100);

        let now = Date.now();

        // –†–∏—Å—É–µ–º –≥–µ–∫—Å—ã (–ø–æ–¥–ª–æ–∂–∫–∞ –ø–æ–¥ —é–Ω–∏—Ç–∞–º–∏)
        ctx.fillStyle = '#2c2722'; ctx.strokeStyle = '#111'; ctx.lineWidth = 4;
        [attacker.base_x, defender.x].forEach(hx => {
            ctx.beginPath();
            for(let i=0; i<6; i++) {
                let a = Math.PI/180 * (60*i-30);
                ctx.lineTo(hx + 90*Math.cos(a), cy + 90*Math.sin(a));
            }
            ctx.closePath(); ctx.fill(); ctx.stroke();
        });

        // --- –û–ë–ù–û–í–õ–ï–ù–ò–ï –ú–ò–õ–ò –ê–¢–ê–ö–ò (–õ–ï–†–ü) ---
        if (meleeAnim) {
            let p = Math.min(1, (now - meleeAnim.start) / meleeAnim.duration);
            if (p >= 1) {
                meleeAnim = null; attacker.x = attacker.base_x;
            } else {
                let ease = p < 0.5 ? 2*p*p : -1+(4-2*p)*p; // –ü–ª–∞–≤–Ω–æ—Å—Ç—å —Ç—É–¥–∞-–æ–±—Ä–∞—Ç–Ω–æ
                attacker.x = attacker.base_x + (defender.x - attacker.base_x - 50) * ease;
                
                // –ú–æ–º–µ–Ω—Ç —É–¥–∞—Ä–∞
                if (p > 0.45 && p < 0.55 && defender.hitTimer < now - 200) {
                    defender.hitTimer = now; screenShake = 12;
                    spawnBlood(defender.x, defender.y);
                    addDamageText(defender.x, defender.y, 35, false);
                }
            }
        }

        // --- –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò –û–¢–†–ò–°–û–í–ö–ê –ü–£–õ–¨ / –†–ê–ö–ï–¢ ---
        for (let i = projectiles.length - 1; i >= 0; i--) {
            let p = projectiles[i];
            let dx = p.targetX - p.x; let dy = p.targetY - p.y;
            let dist = Math.sqrt(dx*dx + dy*dy);

            if (dist < p.speed) {
                // –ü–û–ü–ê–î–ê–ù–ò–ï!
                defender.hitTimer = now; // –ó–∞–ø—É—Å–∫ —Ñ–ª–µ—à–∞ —É—Ä–æ–Ω–∞
                if (p.type === 'rocket') {
                    spawnExplosion(p.targetX, p.targetY);
                    addDamageText(defender.x, defender.y, p.damage, true);
                } else {
                    spawnBlood(p.targetX, p.targetY);
                    spawnSparks(p.targetX, p.targetY);
                    addDamageText(p.targetX, p.targetY, p.damage, false);
                }
                projectiles.splice(i, 1);
                continue;
            }

            p.x += (dx/dist) * p.speed;
            p.y += (dy/dist) * p.speed;

            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ª–µ—Ç—è—â–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞
            ctx.beginPath();
            if (p.type === 'rocket') {
                // –†–∞–∫–µ—Ç–∞ (–°–Ω–∞—Ä—è–¥)
                ctx.arc(p.x, p.y, 6, 0, Math.PI*2); ctx.fillStyle = '#555'; ctx.fill();
                // –°–ø–∞–≤–Ω –¥—ã–º–Ω–æ–≥–æ —Å–ª–µ–¥–∞ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
                particles.push({ x: p.x, y: p.y, vx: 0, vy: -0.5, life: 1, color: '#666', type: 'smoke', size: 4 });
            } else {
                // –ü—É–ª—è (–¢—Ä–∞—Å—Å–µ—Ä)
                ctx.moveTo(p.x, p.y);
                ctx.lineTo(p.x - (dx/dist)*25, p.y - (dy/dist)*25);
                ctx.strokeStyle = '#ffb300'; ctx.lineWidth = 3; ctx.stroke();
            }
        }

        // --- –û–¢–†–ò–°–û–í–ö–ê –Æ–ù–ò–¢–û–í ---
        [attacker, defender].forEach(u => {
            // –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è: –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –†–ñ–ê–í–´–ô/–û–†–ê–ù–ñ–ï–í–´–ô —Ñ–ª–µ—à –≤–º–µ—Å—Ç–æ –±–µ–ª–æ–≥–æ
            let isHit = (now - u.hitTimer) < 100;
            
            // –¢–µ–Ω—å
            ctx.fillStyle = 'rgba(0,0,0,0.5)';
            ctx.beginPath(); ctx.ellipse(u.x, u.y+25, 20, 8, 0, 0, Math.PI*2); ctx.fill();

            // –¢–µ–ª–æ —Ñ–∏—à–∫–∏
            ctx.beginPath(); ctx.arc(u.x, u.y, 25, 0, Math.PI*2);
            ctx.fillStyle = isHit ? '#ffcc00' : '#2c2722'; // –§–ª–µ—à —É—Ä–æ–Ω–∞!
            ctx.fill();
            ctx.lineWidth = 4; ctx.strokeStyle = isHit ? '#fff' : u.color; ctx.stroke();
            
            // –ò–∫–æ–Ω–∫–∞
            ctx.font = "24px Arial"; ctx.textAlign = "center"; ctx.textBaseline = "middle";
            ctx.fillText(u.icon, u.x, u.y + 2);
        });

        // --- –û–¢–†–ò–°–û–í–ö–ê –ß–ê–°–¢–ò–¶ (–ö—Ä–æ–≤—å, –ò—Å–∫—Ä—ã, –î—ã–º, –ì–∏–ª—å–∑—ã) ---
        for (let i = particles.length - 1; i >= 0; i--) {
            let p = particles[i];
            
            // –§–∏–∑–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞
            if (p.type === 'smoke' || p.type === 'fire') {
                p.x += p.vx; p.y += p.vy;
                p.size += (p.type === 'smoke' ? 0.3 : 0.8); // –î—ã–º/–û–≥–æ–Ω—å —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è
            } else {
                p.vy += 0.8; // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è –¥–ª—è –∫—Ä–æ–≤–∏, –∏—Å–∫—Ä –∏ –≥–∏–ª—å–∑
                p.x += p.vx; p.y += p.vy;
            }
            
            p.life -= 0.03;
            if (p.life <= 0) { particles.splice(i, 1); continue; }

            ctx.globalAlpha = p.life;
            ctx.fillStyle = p.color;
            ctx.beginPath();
            if (p.type === 'smoke' || p.type === 'fire' || p.type === 'blood') {
                ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
            } else {
                ctx.fillRect(p.x, p.y, p.size, p.size); // –ò—Å–∫—Ä—ã –∏ –≥–∏–ª—å–∑—ã –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ
            }
            ctx.fill();
            ctx.globalAlpha = 1.0;
        }

        // --- –û–¢–†–ò–°–û–í–ö–ê –¢–ï–ö–°–¢–ê –£–†–û–ù–ê ---
        for (let i = floatingTexts.length - 1; i >= 0; i--) {
            let t = floatingTexts[i];
            ctx.globalAlpha = t.alpha;
            ctx.font = `bold ${20 * t.scale}px Courier New`;
            ctx.fillStyle = t.color;
            ctx.strokeStyle = '#111'; ctx.lineWidth = 4;
            ctx.strokeText(t.text, t.x, t.y); ctx.fillText(t.text, t.x, t.y);
            ctx.globalAlpha = 1.0;
            
            t.y -= 1.2; t.alpha -= 0.02;
            if (t.alpha <= 0) floatingTexts.splice(i, 1);
        }

        ctx.restore();
        requestAnimationFrame(draw);
    }

    draw();

</script>
</body>
</html>
–ì–ª–∞–≤–Ω—ã–µ —Ñ–∏—à–∫–∏ —ç—Ç–æ–≥–æ –∫–æ–¥–∞:
–¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Damage Flash: –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –±–ª–æ–∫ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —é–Ω–∏—Ç–æ–≤. –ö–æ–≥–¥–∞ –≤ —é–Ω–∏—Ç –ø—Ä–∏–ª–µ—Ç–∞–µ—Ç –ø—É–ª—è, –æ–Ω –∑–∞–≥–æ—Ä–∞–µ—Ç—Å—è –Ω–µ –±–æ–ª—å–Ω–∏—á–Ω–æ-–±–µ–ª—ã–º —Ü–≤–µ—Ç–æ–º, –∞ —è—Ä–∫–æ-–∂–µ–ª—Ç—ã–º/–æ—Ä–∞–Ω–∂–µ–≤—ã–º (#ffcc00). –≠—Ç–æ –¥–∞–µ—Ç –æ—â—É—â–µ–Ω–∏–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è –∏—Å–∫—Ä—ã –∏–ª–∏ –æ–≥–Ω—è (–∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è Rust-—Å–µ—Ç—Ç–∏–Ω–≥–∞).

–ì–∏–ª—å–∑—ã –ø—Ä–∏ –æ—á–µ—Ä–µ–¥–∏: –í –º–µ—Ö–∞–Ω–∏–∫–µ burst (–ê–≤—Ç–æ–º–∞—Ç) –≤—ã–ª–µ—Ç–∞—é—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –ø—É–ª–∏ –≤ —Ü–µ–ª—å, –Ω–æ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–∞—Å—Ç–∏—Ü—ã —Ç–∏–ø–∞ casing (–∂–µ–ª—Ç–æ-–∑–æ–ª–æ—Ç—ã–µ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∏), –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ª–µ—Ç–∞—é—Ç –æ—Ç —Å—Ç—Ä–µ–ª–∫–∞ –≤–ª–µ–≤–æ-–≤–Ω–∏–∑ —Å –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–µ–π, –∏–º–∏—Ç–∏—Ä—É—è –≤—ã–±—Ä–æ—Å –≥–∏–ª—å–∑!

–†–∞–∑–±—Ä–æ—Å (Spread): –í –∫–æ–¥–µ –¥–ª—è burst –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Math.random() * 60 - 30. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø—É–ª–∏ –∏–∑ –∞–≤—Ç–æ–º–∞—Ç–∞ –Ω–µ –ª–µ—Ç—è—Ç –≤ –æ–¥–Ω—É —Ç–æ—á–∫—É –ª–∞–∑–µ—Ä–æ–º, –∞ –ª–æ–∂–∞—Ç—Å—è –∫—É—á–Ω–æ –ø–æ –≤—Å–µ–º—É –≥–µ–∫—Å—É –≤—Ä–∞–≥–∞.

–†–∞–∫–µ—Ç–Ω—ã–π —Å–ª–µ–¥: –ú–µ—Ö–∞–Ω–∏–∫–∞ —Ä–∞–∫–µ—Ç—ã (rocket) –≤ –≥–ª–∞–≤–Ω–æ–º —Ü–∏–∫–ª–µ draw() –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä —Å–ø–∞–≤–Ω–∏—Ç —Å–µ—Ä—ã–π –∫—Ä—É–∂–æ–∫ –ø–æ–¥ —Å–æ–±–æ–π. –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –≥—É—Å—Ç–æ–π –∫—Ä–∞—Å–∏–≤—ã–π —à–ª–µ–π—Ñ –¥—ã–º–∞, –ø–æ–∫–∞ –æ–Ω–∞ –ª–µ—Ç–∏—Ç.

–ö–∏–¥–∞–π —ç—Ç–æ—Ç —Ñ–∞–π–ª –Ω–µ–π—Ä–æ–Ω–∫–µ, –æ–Ω–∞ —Å–∫–∞–∂–µ—Ç —Ç–µ–±–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ —Ç–∞–∫—É—é –º–∞—Ç–µ–º–∞—Ç–∏–∫—É! üòé